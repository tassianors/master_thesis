%===============================================================================
\section{Escolha do modelo}
\label{sec:sys_ident_modelling_choosing}
%===============================================================================

%===============================================================================
\subsection{Modelagem de Sistemas}
\label{sec:sys_ident_modeling}
%===============================================================================

Sistemas existem em toda nossa volta, podem ser simples, complexos, podemos percebe-los como um sistema
ou podemos nem perceber que estamos interagindo com um. Ao dirigir um carro por exemplo, construímos um
modelo mental para o sistema que é o carro e por meio das percepções que temos agimos sobre o sistema
a fim de controla-lo da forma como desejamos.

Modelos são formas ou representações de como vemos e entendemos os sistemas. Para um mesmo sistema podemos ter
diversos modelos. No caso de dirigir um carro, por exemplo, estamos mais acostumados a dirigir um carro em 
especifico. Ao trocar de carro, passamos a ter a percepção de que alguma coisa não esta funcionando corretamente, 
a resposta da aceleração, embreagem é diferente. Desta forma o modelo mental que temos para o nosso carro não 
é 100 \% compatível com o novo carro, devemos então adequar nosso modelo mentar à resposta do novo carro aos
nossos comandos.

Modelos, portanto, são fundamentais para o conhecimento, para a análise, para o controle de sistemas. \cite{aguirre}.
A modelagem do processo de dirigir é um modelo mental, existem outros tipos de modelos para sistemas que são
mais consistentes e podem ser difundidos e compartilhados entre as pessoas sem haver a necessidade de entender 
o que a pessoa formulou mentalmente para o sistema. Modelos que possam se relacionar de forma matemática são
de grande apelo, e assim como os modelos mentais, modelos matemáticos também são formados por por observação
e dados coletados que descrevem o funcionamento do sistema.

Existem dois principais ramos para modelagem de sistemas, um deles parte-se do conhecimento intrínseco do mesmo
para obter-se o modelo, enquanto que o outro não possui este pré-requisito, focando-se em técnicas que tornem o
processo de modelagem o mais independente possível da necessidade de se conhecer o sistema, antes de modela-lo. 
Estes dois processos são conhecidos como {\it{Modelagem caixa branca}} e {\it{Modelagem caixa preta}} respectivamente.

No caso de modelagem caixa branca, faz-se necessário conhecer a fundo o sistema modelado. Além de estar bem 
familiarizado cm o sistema é necessário conhecer as relações matemáticas que descrevem os fenômenos envolvidos.
Modelagem caixa branca também é conhecida como {\it{Modelagem pela Física}}, {\it{Natureza do processo}} ou 
{\it{conceitual}}. Para uma modelagem caixa branca normalmente gasta-se um elevado tempo para que todos os 
fenômenos envolvidos sejam conhecidos e caracterizado, devido a isso nem sempre é viável seguir este procedimento.
\cite{aguirre}.

Identificação de sistemas é uma área do conhecimento que estuda técnicas alternativas para modelagem matemática.
Uma das características destas técnicas é que pouco ou nenhum conhecimento prévio do sistema é necessário. Este tipo 
de técnica é também conhecido como {\it{Modelagem (ou identificação) caixa preta}} ou {\it{modelagem empírica}}.

Algo importante a se destacar antes do processo de modelagem do sistema é a escolha do que deseja-se modelar deste
sistema. Uma modelagem completa de todas as características é muitas vezes inviável e na maioria dos sistemas reais, 
desnecessário. Usualmente, temos a necessidade de interagir, seja controlando ou observando, um conjunto restrito 
de informações do sistema. No exemplo de dirigir, não necessidade de que seja modelado a transferência de calor do 
motor, este tipo de informação não ajudaria no processo de dirigir o carro, podendo ser desconsiderado da modelagem.


%===============================================================================
\subsubsection{Considerações em modelagem}
\label{sec:sys_ident_basic_definitions}
%===============================================================================

Geralmente, na modelagem de sistemas, fazem-se algumas considerações sobre o sistema:

{\it{Linearidade}}. Uma consideração frequentemente feita é a de se supor que o sistema sendo modelado se comporta 
de forma aproximadamente linear. Tal suposição é normalmente verificada observando-se o comportamento em uma faixa
relativamente estreita de operações. \cite{aguirre}

Formalmente diz-se que um sistema é linear se ele obedece o {\it{principio da superposição}} [todo:achar a bibliografia disso].
A consideração da linearidade normalmente simplifica bastante p modelo a ser construído. Entretanto, há situações em que 
esta consideração não é adequada, como por exemplo, para sistemas como dinâmica fortemente bilinear (que não podem ser descritos
adequadamente por um único modelo linear, independentemente de quão estreita seja a faixa de operação considerada). E também
no caso onde se deseja estudar características dinâmicas não-lineares do sistema, tais como oscilações e bifurcações.
\cite{aguirre}

{\it{Invariância no tempo}}. A consideração de invariância temporal implica que o comportamento do sistema sendo modelado não 
varia com o tempo. Isso não significa que as variáveis do sistema tenham valores constantes. Pelo contrario, normalmente os
valores das variáveis que caracterizam um sistema flutuam com o tempo, sendo que tal evolução temporal é determinada por uma 
lei. Normalmente refere-se a esta lei como a dinâmica do sistema. Portanto, ser invariante no tempo não quer dizer que o sistema
esta estático, mas certamente implica que a dinâmica que esta regulando a evolução temporal e a mesma. 

Formalmente diz-se que um sistema é invariante se um deslocamento no tempo na entrada causa um deslocamento no tempo na saída.

%===============================================================================
\subsection{Forma geral de famílias de modelos}
\label{sec:si_modeling_family_models}
%===============================================================================

O modelo de um sistema é a descrição de algumas propriedades deste. Nesta seção será 
apresentado modelos de sistemas invariantes no tempo e alguns dos mais comuns modelos utilizados.

Um modelo linear pode ser representado como em (\ref{eq:si_modeling_lti}).

\begin{equation}
y(t)=G(q)u(t)+H(q)e(t)
\label{eq:si_modeling_lti}
\end{equation}

com:

\begin{equation}
G(q)=\sum_{k=1}^{\infty}g(k)q^{-k}\\
\\
H(q)=1+\sum_{k=1}^{\infty}h(k)q^{-k}
\label{eq:si_modeling_lti_det}
\end{equation}

Uma forma bem direta para a identificação de sistemas é tornar as funções $G(q)$ e $H(q)$ de (\ref{eq:si_modeling_lti_det})
como funções racionais e que os coeficientes do denominador e numerador destes polinomios sejam os objetivos do processo
de identificação.

Provavelmente o modelo mais simples para descrever a relação entre entrada e saída é obtido
descrevendo o sistema como uma equação linear das diferenças (\ref{eq:si_modeling_arx}). \cite{ljung}

\begin{equation}
y(t)+a_1 y(t-1)+...+a_{na} y(t-n_a)= b_1 u(t-1)+...+b_{nb} u(t-n_b)+e(t)
\label{eq:si_modeling_arx}
\end{equation}

O ruido branco $e(t)$ aqui entra como um erro direto na equação. O parametros ajustaveis neste caso são:

\begin{equation}
\theta = \begin{bmatrix}
a_1 & a_2 & ... & a_{na} & b_1 & ... & b_{nb} 
\end{bmatrix}^T
\end{equation}

Definem-se os polinomios como:

\begin{equation}
A(q)=1+a_1q^{-1}+...+a_{na}q^{-n_a}
\nonumber
\end{equation}

\begin{equation}
B(q)=b_1q^{-1}+...+b_{nb}q^{-n_b}
\nonumber
\end{equation}

O modelo definido em (\ref{eq:si_modeling_arx}) também é conhecido como {\bf{ARX}}, onde {\it{AR}} refere-se 
a parte de $A(q)y(t)$ autoregressiva, e {\it{X}} como a entrada extra $B(q)u(t)$.

Uma das desvantagens do modelo (\ref{eq:si_modeling_arx}) é a falta de liberdade para descrever as propriedades
dos disturbios sobre o sistema. Pode-se então adicionar certo grau de liberdade descrevendo a equação do erro 
como uma média móvel do ruido branco, isso nos remete a (\ref{eq:si_modeling_armax}).

\begin{equation}
\begin{matrix}
y(t) & +a_1 y(t-1)+...+a_{na} y(t-n_a)= b_1 u(t-1)+...+b_{nb} u(t-n_b)\\ 
 & +e(t) +c_1 e(t-1)+...+c_{nc} e(t-n_c)
\end{matrix}
\label{eq:si_modeling_armax}
\end{equation}

Com a equação abaixo correspondendo com as funções de transferência de (\ref{eq:si_modeling_lti_det_armax}).

\begin{equation}
C(q)=1+c_1q^{-1}+...+c_{nc}q^{-n_c}
\nonumber
\end{equation}

\begin{equation}
G(q, \theta)=\frac{B(q)}{A(q)} , \;\;
H(q, \theta)=\frac{C(q)}{A(q)}
\label{eq:si_modeling_lti_det_armax}
\end{equation}

Onde os parametros para a identificação são:

\begin{equation}
\theta = \begin{bmatrix}
a_1 & a_2 & ... & a_{na} & b_1 & ... & b_{nb} & c_1 & ... & c_{nc}
\end{bmatrix}^T
\end{equation}

O modelo definido em (\ref{eq:si_modeling_armax}) também é conhecido como {\bf{ARMAX}}, onde {\it{MA}} define 
a média móvel ($C(q)e(t)$)

A partir do equacionamento do sistema apresentado em (\ref{eq:si_modeling_lti_det_armax}) e (\ref{eq:si_modeling_lti})
podemos facilmente generalizar para o equacionamento apresentado em (\ref{eq:si_modeling_lti_det_global}).

\begin{equation}
A(q)y(t)=\frac{B(q)}{F(q)}u(t)+\frac{C(q)}{D(q)}e(t)
\label{eq:si_modeling_lti_det_global}
\end{equation}

Quando usamos apenas um conjunto dos polinomis de $A(q) \;...\; F(q)$ obtemos as estruturas de modelos que
pode ser visto na Tabela \ref{table:si_modeling_models}.


\begin{table*}[htbp]
\begin{center}
\caption{Alguns modelos comuns para sistemas SISO. Casos especias de (\ref{eq:si_modeling_lti_det_global}).}
\label{table:si_modeling_models}
\begin{tabular}{cl}
\hline
        Polinomios usados em (\ref{eq:si_modeling_lti_det_global}) & Mome da estrutura do modelo   \\
\hline
        B                 & FIR (finite impulse response) \\ 
        AB                & ARX                           \\ 
        ABC               & ARMAX                         \\ 
        AC                & ARMA                          \\ 
        ABD               & ARARX                         \\ 
        ABCD              & ARARMAX                       \\ 
        BF                & OE (output error)             \\ 
        BFCD              & Box-Jenkins                   \\
\hline
\end{tabular}
\end{center}
\end{table*}


