%===============================================================================
\section{Escolha do modelo}
\label{sec:sys_ident_modelling_choosing}
%===============================================================================

Modelos são formas ou representações de como vemos e entendemos os sistemas.
Para um mesmo sistema podemos ter diversos modelos, portanto, modelos são
fundamentais para o conhecimento, para a análise, para o controle de sistemas. \cite{aguirre}

Existem dois principais ramos para modelagem de sistemas, um deles parte-se do
conhecimento intrínseco do mesmo para obter-se o modelo, enquanto que o outro
não possui este pré-requisito, focando-se em técnicas que tornem o processo de
modelagem o mais independente possível da necessidade de se conhecer o sistema,
antes de modela-lo.  Estes dois processos são conhecidos como
{\it{Modelagem caixa branca}} e {\it{Modelagem caixa preta}} respectivamente.

No caso de modelagem caixa branca, faz-se necessário conhecer a fundo o sistema
modelado. Além de estar bem familiarizado com o sistema é necessário conhecer as
relações matemáticas que descrevem os fenômenos envolvidos. Devido a isso o tempo
gasto para este tipo de abordagem é elevado, tornando por muitas vezes inviável
este procedimento.  \cite{aguirre}.

Para o caso de modelagem caixa preta é que pouco ou nenhum conhecimento prévio
do sistema é necessário. Este tipo de técnica é também conhecido como {\it{modelagem empírica}}.

Algo importante a se destacar antes do processo de modelagem do sistema é a
escolha do que deseja-se modelar deste sistema. Uma modelagem completa de todas
as características é muitas vezes inviável e na maioria dos sistemas reais,
desnecessário. Usualmente, temos a necessidade de interagir, seja controlando ou
observando, um conjunto restrito de informações do sistema, deve-se então focar
o modelo nestas características desejadas.


%===============================================================================
\subsection{Considerações em modelagem}
\label{sec:sys_ident_basic_definitions}
%===============================================================================

Geralmente, na modelagem de sistemas algumas considerações são feitas sobre o este:

{\it{Linearidade}}. Uma consideração frequentemente feita é a de se supor que o sistema sendo modelado se
comporta de forma aproximadamente linear. Tal suposição é normalmente verificada observando-se o comportamento
em uma faixa relativamente estreita de operações. \cite{aguirre}

Formalmente diz-se que um sistema é linear se ele obedece o {\it{princípio da superposição}}.  A consideração
da linearidade normalmente simplifica bastante o modelo a ser construído.
Entretanto, há situações em que esta consideração não é adequada, como por exemplo, para sistemas como
dinâmica fortemente bilinear (que não podem ser descritos adequadamente por um único modelo linear,
independentemente de quão estreita seja a faixa de operação considerada). E também no caso onde se deseja
estudar características dinâmicas não-lineares do sistema, tais como oscilações e bifurcações.  \cite{aguirre}

{\it{Invariância no tempo}}. A consideração de invariância temporal implica que o comportamento do sistema
sendo identificado não varia com o tempo. Formalmente diz-se que um sistema é invariante se um deslocamento no
tempo na entrada causa um deslocamento no tempo na saída.

%===============================================================================
\subsection{Forma geral de famílias de modelos}
\label{sec:si_modeling_family_models}
%===============================================================================

Modelo de um sistema é a descrição de {\it{algumas}} de suas propriedades. Nesta seção serão 
apresentados modelos de sistemas invariantes no tempo e alguns dos mais comuns modelos utilizados.

Um modelo linear de tempo discreto pode ser representado como em (\ref{eq:si_modeling_lti}).

\begin{equation}
y(t)=G(q)u(t)+H(q)e(t)
\label{eq:si_modeling_lti}
\end{equation}

Com $G(q)$ sendo a representação da planta e $H(q)$ a dscrição do ruido que afeta o sistema. Representados
como abaixo:

\begin{equation}
G(q)=\sum_{k=1}^{\infty}g(k)q^{-k}
\nonumber
\end{equation}

\begin{equation}
H(q)=1+\sum_{k=1}^{\infty}h(k)q^{-k}
\nonumber
\end{equation}

Uma forma direta para a identificação de sistemas é tornar as funções $G(q)$ e $H(q)$ em funções racionais e
que os coeficientes do denominador e numerador destes polinômios sejam os objetivos do processo de identificação.

Provavelmente o modelo mais simples para descrever a relação entre entrada e saída é obtido
descrevendo o sistema como uma equação linear (\ref{eq:si_modeling_arx}). \cite{ljung}

\begin{equation}
y(t)+a_1 y(t-1)+...+a_{na} y(t-n_a)= b_1 u(t-1)+...+b_{nb} u(t-n_b)+e(t)
\label{eq:si_modeling_arx}
\end{equation}

O ruido branco $e(t)$ aqui entra como um erro direto na equação. O parâmetros ajustáveis neste caso são:

\begin{equation}
\theta = \begin{bmatrix}
a_1 & a_2 & ... & a_{na} & b_1 & ... & b_{nb} 
\end{bmatrix}^T
\end{equation}

Definem-se os polinômios:

\begin{equation}
A(q)=1+a_1q^{-1}+...+a_{na}q^{-n_a}
\nonumber
\end{equation}

\begin{equation}
B(q)=b_1q^{-1}+...+b_{nb}q^{-n_b}
\nonumber
\end{equation}

O modelo definido em (\ref{eq:si_modeling_arx}) também é conhecido como {\bf{ARX}}, onde {\it{AR}} refere-se 
à parte de $A(q)y(t)$ auto-regressiva, e {\it{X}} como a entrada extra $B(q)u(t)$.

Uma das limitações deste modelo é a falta de liberdade para descrever as propriedades
dos distúrbios sobre o sistema. Pode-se então adicionar certo grau de liberdade descrevendo a equação do erro 
como uma média móvel do ruído branco, isso nos remete a (\ref{eq:si_modeling_armax}).

\begin{equation}
\begin{matrix}
y(t) & +a_1 y(t-1)+...+a_{na} y(t-n_a)= b_1 u(t-1)+...+b_{nb} u(t-n_b)\\ 
 & +e(t) +c_1 e(t-1)+...+c_{nc} e(t-n_c)
\end{matrix}
\label{eq:si_modeling_armax}
\end{equation}

Com a equação abaixo correspondendo com as funções de transferência em (\ref{eq:si_modeling_lti_det_armax}).

\begin{equation}
C(q)=1+c_1q^{-1}+...+c_{nc}q^{-n_c}
\nonumber
\end{equation}

\begin{equation}
G(q, \theta)=\frac{B(q)}{A(q)} , \;\;
H(q, \theta)=\frac{C(q)}{A(q)}
\label{eq:si_modeling_lti_det_armax}
\end{equation}

Onde os parâmetros a estimar são:

\begin{equation}
\theta = \begin{bmatrix}
a_1 & a_2 & ... & a_{na} & b_1 & ... & b_{nb} & c_1 & ... & c_{nc}
\end{bmatrix}^T
\end{equation}

O modelo definido em (\ref{eq:si_modeling_armax}) também é conhecido como {\bf{ARMAX}}, onde {\it{MA}} define 
a média móvel ($C(q)e(t)$) do ruido.

A partir do equacionamento do sistema apresentado em (\ref{eq:si_modeling_lti_det_armax}) e (\ref{eq:si_modeling_lti})
podemos facilmente generalizar para o equacionamento apresentado em (\ref{eq:si_modeling_lti_det_global}).

\begin{equation}
A(q)y(t)=\frac{B(q)}{F(q)}u(t)+\frac{C(q)}{D(q)}e(t)
\label{eq:si_modeling_lti_det_global}
\end{equation}

Quando usamos apenas um conjunto dos polinômios de $A(q) \;...\; F(q)$ obtemos as estruturas de modelos que
pode ser visto na Tabela \ref{table:si_modeling_models}.

\begin{table*}[htbp]
\begin{center}
\caption{Alguns modelos comuns para sistemas SISO. Casos especias de (\ref{eq:si_modeling_lti_det_global}).}
\label{table:si_modeling_models}
\begin{tabular}{cl}
\hline
        Polinômios usados em (\ref{eq:si_modeling_lti_det_global}) & Mome da estrutura do modelo   \\
\hline
        B                 & FIR (finite impulse response) \\ 
        AB                & ARX                           \\ 
        ABC               & ARMAX                         \\ 
        AC                & ARMA                          \\ 
        ABD               & ARARX                         \\ 
        ABCD              & ARARMAX                       \\ 
        BF                & OE (output error)             \\ 
        BFCD              & Box-Jenkins                   \\
\hline
\end{tabular}
\end{center}
\end{table*}

As equações que descrevem a saída do sistema em função da entrada $u(t)$ e do ruido $e(t)$ como apresentado
em \eqref{eq:si_modeling_lti} e que podem ser caracterizados pela utilização de vários polinômios, nada mais
são do que famílias ou conjuntos de modelos.
Existe para cada conjunto de modelos uma infinidade de possíveis saídas para uma mesma entrada, bastando para
isso que os parâmetros dos coeficientes dos polinômios sejam escolhidos apropriadamente. O objetivo na
identificação de sistemas é encontrar um conjunto de coeficientes que consiga melhor descrever os dados
observados na saída, para o maior conjunto de sinais de entrada possíveis.

Escolher um conjunto de modelo que não consegue representar o sistema físico, proporciona erros na estimativa
dos parâmetros. (Mais informações sobre estes erros serão abordados na seção
(\ref{sec:si_par_estim_uncertanties})). Por outro lado a super estimativa da ordem do conjunto de modelos pode
adicionar complexidade desnecessária além de comportamentos transientes no modelo que não existem na planta real.

